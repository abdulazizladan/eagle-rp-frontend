<div fxLayout="column" fxLayoutGap="15px">
  <mat-toolbar class="mat-elevation-z4">
    <mat-toolbar-row>
      <h1>Users</h1>
      <span fxFlex="1 1 auto"></span>
      <button mat-flat-button color="accent" (click)="openDialog()">
        <mat-icon>person_add</mat-icon>
        New user
      </button>
    </mat-toolbar-row>
    <mat-toolbar-row fxLayout="row">
      <mat-form-field appearance="outline" fxFlex="100%">
        <mat-label>Search</mat-label>
        <input matInput>
        <mat-icon matSuffix>
          search
        </mat-icon>
      </mat-form-field>
    </mat-toolbar-row>
  </mat-toolbar>

  <div id="body">
    <span fxFlex="1 1 auto"></span>
    {{store.usersCount()}}
    @if(store.usersCount() === 1) {
      user
    } @else {
     users
    }
  </div>
</div>
@defer() {
  <table mat-table class="mat-elevation-z2" [dataSource]="store.users()">

    <ng-container matColumnDef="id">
      <th mat-header-cell *matHeaderCellDef>
        ID
      </th>
      <td mat-cell *matCellDef="let user">
        {{user.id}}
      </td>
    </ng-container>

    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef>
        Email
      </th>
      <td mat-cell *matCellDef="let user">
        {{user.email}}
      </td>
    </ng-container>

    <ng-container matColumnDef="firstName">
      <th mat-header-cell *matHeaderCellDef>
        First name
      </th>
      <td mat-cell *matCellDef="let user">
        {{user.firstName}}
      </td>
    </ng-container>

    <ng-container matColumnDef="lastName">
      <th mat-header-cell *matHeaderCellDef>
        Last name
      </th>
      <td mat-cell *matCellDef="let user">
        {{user.lastName}}
      </td>
    </ng-container>

    <ng-container matColumnDef="action">
      <th mat-header-cell *matHeaderCellDef>
        Action
      </th>
      <td mat-cell *matCellDef="let user">
        {{user.status}}
        <mat-slide-toggle>

        </mat-slide-toggle>

        <button mat-flat-button color="accent" routerLink={{user.id}}>
          View
        </button>
        <button mat-flat-button color="warn" (click)="store.delete(user.id)">
          Delete
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

  </table>}@placeholder {
    <mat-progress-bar color="accent" mode="query"></mat-progress-bar>
  }
<!--}@placeholder() {
  No users found
}@loading() {
  <mat-progress-bar color="accent"></mat-progress-bar>
}-->
